<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <link href="https://fonts.googleapis.com/css?family=Montserrat+Alternates&display=swap" rel="stylesheet" />
    <title>Arizona RP Launcher</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
        }
        
        :root {
            --primary-color: rgba(0, 120, 212, 0.8);
            --secondary-color: rgba(93, 93, 93, 0.3);
            --text-color: rgba(255, 255, 255, 0.95);
            --shadow-color: rgba(0, 0, 0, 0.25);
            --border-radius: 10px;
            --transition-speed: 0.3s;
        }
        
        body {
            overflow: hidden;
            background: #000;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            color: white;
            width: 100vw;
            height: 100vh;
            margin: 0;
            padding: 0;
            display: flex;
            justify-content: center;
            align-items: center;
            position: relative;
        }
        
        #container {
            width: 100%;
            height: 100%;
            position: relative;
            background: #000;
            overflow: hidden;
            display: flex;
            flex-direction: column;
        }
        
        canvas {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            display: block;
        }
        
        #main-canvas {
            z-index: 1;
        }
        
        #bloom-canvas {
            z-index: 2;
            opacity: 0;
            filter: blur(20px);
            mix-blend-mode: screen;
            pointer-events: none;
        }

        /* –û—Å–Ω–æ–≤–Ω–æ–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å */
        .interface {
            width: 100%;
            height: 100%;
            position: relative;
            z-index: 3;
            display: flex;
            padding: 20px;
            gap: 20px;
            max-width: 1400px;
            margin: 0 auto;
        }

        .left-panel {
            flex: 0 0 350px;
            background: var(--secondary-color);
            border-radius: var(--border-radius);
            padding: 20px;
            box-shadow: 0px 4px 4px var(--shadow-color);
            display: flex;
            flex-direction: column;
            gap: 20px;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .right-panel {
            flex: 1;
            background: var(--secondary-color);
            border-radius: var(--border-radius);
            padding: 20px;
            box-shadow: 0px 4px 4px var(--shadow-color);
            display: flex;
            flex-direction: column;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .header {
            text-align: center;
            padding-bottom: 20px;
            margin-bottom: 20px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        .title {
            font-family: 'Montserrat Alternates', sans-serif;
            font-size: clamp(24px, 3vw, 36px);
            color: var(--text-color);
            text-shadow: 2px 2px 4px rgba(0,0,0,0.8);
            margin-bottom: 5px;
        }

        .subtitle {
            font-family: 'Montserrat Alternates', sans-serif;
            font-size: clamp(14px, 1.5vw, 20px);
            color: rgba(255, 255, 255, 0.7);
            text-shadow: 1px 1px 2px rgba(0,0,0,0.8);
        }

        /* –ü–æ–ª–µ –≤–≤–æ–¥–∞ –Ω–∏–∫–Ω–µ–π–º–∞ –∏ –≤—ã–±–æ—Ä–∞ —Å–µ—Ä–≤–µ—Ä–∞ */
        .nickname-section {
            margin-bottom: 15px;
        }

        .server-section {
            margin-bottom: 20px;
        }

        .section-label {
            font-family: 'Montserrat Alternates', sans-serif;
            font-size: 14px;
            color: rgba(255, 255, 255, 0.8);
            margin-bottom: 8px;
            display: block;
        }

        .nickname-input,
        .server-select {
            width: 100%;
            height: 45px;
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 8px;
            color: var(--text-color);
            font-family: 'Montserrat Alternates', sans-serif;
            font-size: 14px;
            padding: 0 15px;
            outline: none;
            transition: all var(--transition-speed);
        }

        .nickname-input:focus,
        .server-select:focus {
            border-color: var(--primary-color);
            box-shadow: 0 0 0 2px rgba(0, 120, 212, 0.2);
        }

        .nickname-input::placeholder {
            color: rgba(255, 255, 255, 0.4);
        }

        .server-select {
            appearance: none;
            -webkit-appearance: none;
            -moz-appearance: none;
            background-image: url("data:image/svg+xml;charset=UTF-8,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='white'%3e%3cpath d='M7 10l5 5 5-5z'/%3e%3c/svg%3e");
            background-repeat: no-repeat;
            background-position: right 15px center;
            background-size: 20px;
            padding-right: 40px;
            cursor: pointer;
        }

        .server-select option {
            background: rgba(0, 0, 0, 0.9);
            color: white;
            padding: 10px;
        }

        /* –ö–Ω–æ–ø–∫–∞ "–ù–∞—á–∞—Ç—å –∏–≥—Ä—É" */
        .start-btn {
            width: 100%;
            height: 50px;
            background: linear-gradient(135deg, var(--primary-color), rgba(0, 80, 150, 0.8));
            border: none;
            border-radius: 8px;
            color: white;
            font-family: 'Montserrat Alternates', sans-serif;
            font-size: 16px;
            font-weight: bold;
            cursor: pointer;
            transition: all var(--transition-speed);
            box-shadow: 0 4px 15px rgba(0, 120, 212, 0.3);
            margin-top: 10px;
            text-transform: uppercase;
            letter-spacing: 1px;
            position: relative;
            overflow: hidden;
        }

        .start-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(0, 120, 212, 0.4);
        }

        .start-btn:active {
            transform: translateY(0);
        }

        .start-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none !important;
        }

        .start-btn-loading {
            position: relative;
            color: transparent;
        }

        .start-btn-loading::after {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 20px;
            height: 20px;
            margin: -10px 0 0 -10px;
            border: 2px solid rgba(255, 255, 255, 0.3);
            border-top-color: white;
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        /* –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞ */
        .server-stats {
            display: flex;
            flex-direction: column;
            gap: 15px;
            margin-top: auto;
            padding-top: 20px;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
        }

        .stat-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .stat-label {
            font-family: 'Montserrat Alternates', sans-serif;
            font-size: 14px;
            color: rgba(255, 255, 255, 0.7);
        }

        .stat-value {
            font-family: 'Montserrat Alternates', sans-serif;
            font-size: 16px;
            color: var(--primary-color);
            font-weight: bold;
        }

        .stat-online {
            color: #4CAF50;
        }

        .stat-queue {
            color: #FF9800;
        }

        .stat-max {
            color: #2196F3;
        }

        /* –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä –∑–∞–≥—Ä—É–∑–∫–∏ */
        .loading-indicator {
            display: none;
            text-align: center;
            padding: 10px;
            color: rgba(255, 255, 255, 0.7);
            font-family: 'Montserrat Alternates', sans-serif;
            font-size: 12px;
        }

        .loading-indicator.active {
            display: block;
        }

        .loading-dots {
            display: inline-block;
            animation: dots 1.5s infinite;
        }

        @keyframes dots {
            0%, 20% { content: '.'; }
            40% { content: '..'; }
            60%, 100% { content: '...'; }
        }

        /* –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è */
        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            padding: 15px 20px;
            border-radius: 8px;
            font-family: 'Montserrat Alternates', sans-serif;
            font-size: 14px;
            z-index: 1000;
            animation: slideIn 0.3s ease;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3);
            max-width: 400px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .notification-success {
            background: rgba(76, 175, 80, 0.9);
        }

        .notification-error {
            background: rgba(244, 67, 54, 0.9);
        }

        .notification-warning {
            background: rgba(255, 152, 0, 0.9);
        }

        .notification-info {
            background: rgba(33, 150, 243, 0.9);
        }

        .notification-close {
            background: transparent;
            border: none;
            color: white;
            cursor: pointer;
            font-size: 16px;
            margin-left: auto;
            padding: 0 5px;
        }

        /* –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø—É—Ç–∏ */
        .path-info {
            background: rgba(255, 255, 255, 0.05);
            padding: 10px;
            border-radius: 6px;
            margin-top: 10px;
            font-size: 12px;
            color: rgba(255, 255, 255, 0.6);
            font-family: monospace;
            word-break: break-all;
        }

        /* –ê–¥–∞–ø—Ç–∏–≤–Ω–æ—Å—Ç—å */
        @media (max-width: 768px) {
            .interface {
                flex-direction: column;
                padding: 10px;
                gap: 15px;
            }
            
            .left-panel {
                flex: 0 0 auto;
                max-height: 400px;
            }
            
            .right-panel {
                flex: 1;
                min-height: 200px;
            }
        }
        
        @media (max-width: 480px) {
            .interface {
                padding: 5px;
            }
            
            .left-panel,
            .right-panel {
                padding: 15px;
            }
        }

        /* –°–∫—Ä–æ–ª–ª–±–∞—Ä */
        ::-webkit-scrollbar {
            width: 8px;
        }
        
        ::-webkit-scrollbar-track {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 4px;
        }
        
        ::-webkit-scrollbar-thumb {
            background: var(--primary-color);
            border-radius: 4px;
        }
        
        ::-webkit-scrollbar-thumb:hover {
            background: rgba(0, 120, 212, 0.8);
        }

        @keyframes slideIn {
            from {
                transform: translateX(100%);
                opacity: 0;
            }
            to {
                transform: translateX(0);
                opacity: 1;
            }
        }

        /* –ù–æ–≤–∞—è –ø–∞–Ω–µ–ª—å –Ω–∞—Å—Ç—Ä–æ–µ–∫ */
        .settings-panel {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            display: none;
            justify-content: center;
            align-items: center;
            z-index: 1000;
        }

        .settings-content {
            background: var(--secondary-color);
            border-radius: var(--border-radius);
            padding: 20px;
            width: 80%;
            max-width: 800px;
            max-height: 80%;
            overflow-y: auto;
            box-shadow: 0px 4px 4px var(--shadow-color);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .settings-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .settings-title {
            font-family: 'Montserrat Alternates', sans-serif;
            font-size: 24px;
            color: var(--text-color);
        }

        .close-settings {
            background: transparent;
            border: none;
            color: white;
            font-size: 24px;
            cursor: pointer;
        }

        .checkbox-group {
            display: flex;
            flex-direction: column;
            gap: 10px;
            margin-bottom: 20px;
        }

        .checkbox-item {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .checkbox-label {
            font-family: 'Montserrat Alternates', sans-serif;
            font-size: 14px;
            color: rgba(255, 255, 255, 0.8);
        }

        .save-settings-btn {
            width: 100%;
            height: 45px;
            background: linear-gradient(135deg, var(--primary-color), rgba(0, 80, 150, 0.8));
            border: none;
            border-radius: 8px;
            color: white;
            font-family: 'Montserrat Alternates', sans-serif;
            font-size: 16px;
            font-weight: bold;
            cursor: pointer;
            transition: all var(--transition-speed);
            box-shadow: 0 4px 15px rgba(0, 120, 212, 0.3);
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .save-settings-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(0, 120, 212, 0.4);
        }
    </style>
</head>
<body>
    <div id="container">
        <canvas id="main-canvas"></canvas>
        <canvas id="bloom-canvas"></canvas>
        
        <div id="notificationsContainer"></div>
        
        <div class="interface">
            <div class="left-panel">
                <div class="header">
                    <h1 class="title">üöÄ Arizona RP Launcher</h1>
                    <p class="subtitle">–ó–∞–ø—É—Å–∫ —á–µ—Ä–µ–∑ –∫–æ–º–∞–Ω–¥–Ω—É—é —Å—Ç—Ä–æ–∫—É</p>
                </div>
                
                <div class="nickname-section">
                    <label class="section-label">–í–∞—à –Ω–∏–∫–Ω–µ–π–º:</label>
                    <input type="text" class="nickname-input" id="nicknameInput" 
                           placeholder="–í–≤–µ–¥–∏—Ç–µ –≤–∞—à –Ω–∏–∫–Ω–µ–π–º" maxlength="20" autocomplete="off">
                </div>
                
                <div class="server-section">
                    <label class="section-label">–í—ã–±–µ—Ä–∏—Ç–µ —Å–µ—Ä–≤–µ—Ä:</label>
                    <select class="server-select" id="serverSelect">
                        <option value="">–ó–∞–≥—Ä—É–∑–∫–∞ —Å–µ—Ä–≤–µ—Ä–æ–≤...</option>
                    </select>
                    <button onclick="loadServers()" style="margin-top: 8px; padding: 8px 12px; background: rgba(255,255,255,0.1); border: 1px solid rgba(255,255,255,0.2); border-radius: 6px; color: white; cursor: pointer; font-family: 'Montserrat Alternates'; font-size: 12px; width: 100%;">
                        üîÑ –û–±–Ω–æ–≤–∏—Ç—å —Å–ø–∏—Å–æ–∫ —Å–µ—Ä–≤–µ—Ä–æ–≤
                    </button>
                    <div class="loading-indicator" id="serverLoading">
                        –ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö —Å–µ—Ä–≤–µ—Ä–æ–≤<span class="loading-dots"></span>
                    </div>
                </div>
                
                <button class="start-btn" id="startBtn" disabled>
                    <span>üéÆ –ù–∞—á–∞—Ç—å –∏–≥—Ä—É</span>
                </button>
                
                <button onclick="openSettings()" style="width: 100%; height: 45px; background: rgba(255,255,255,0.1); border: 1px solid rgba(255,255,255,0.2); border-radius: 8px; color: white; cursor: pointer; font-family: 'Montserrat Alternates'; font-size: 14px;">
                    ‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∏
                </button>
                
                <div class="server-stats" id="serverStats" style="display: none;">
                    <div class="stat-item">
                        <span class="stat-label">–°–µ—Ä–≤–µ—Ä:</span>
                        <span class="stat-value" id="serverName">-</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-label">–û–Ω–ª–∞–π–Ω:</span>
                        <span class="stat-value stat-online" id="serverOnline">-</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-label">–û—á–µ—Ä–µ–¥—å:</span>
                        <span class="stat-value stat-queue" id="serverQueue">-</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-label">–ú–∞–∫—Å. –∏–≥—Ä–æ–∫–æ–≤:</span>
                        <span class="stat-value stat-max" id="serverMax">-</span>
                    </div>
                </div>
            </div>
            
            <div class="right-panel">
                <div class="header">
                    <h2 class="title" id="selectedServerTitle">–í—ã–±–µ—Ä–∏—Ç–µ —Å–µ—Ä–≤–µ—Ä</h2>
                    <p class="subtitle" id="selectedServerSubtitle">–î–∞–Ω–Ω—ã–µ –æ–±–Ω–æ–≤–ª—è—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏</p>
                </div>
                
                <div style="flex: 1; display: flex; align-items: center; justify-content: center;">
                    <div id="serverInfoContent">
                        <p style="text-align: center; color: rgba(255,255,255,0.6); font-family: 'Montserrat Alternates';">
                            –í—ã–±–µ—Ä–∏—Ç–µ —Å–µ—Ä–≤–µ—Ä –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏<br>
                            <span style="font-size: 14px; color: rgba(255,255,255,0.4);">–î–∞–Ω–Ω—ã–µ –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è —Å —Å–µ—Ä–≤–µ—Ä–∞ Arizona</span>
                        </p>
                    </div>
                </div>
                
                <div class="path-info" id="pathInfo">
                    –ü—É—Ç—å –∫ –ª–∞—É–Ω—á–µ—Ä—É: <span id="launcherPath">–ó–∞–≥—Ä—É–∑–∫–∞...</span><br>
                    <small>–ó–∞–ø—É—Å–∫ —á–µ—Ä–µ–∑: ArizonaLauncher6_byAIR.exe -c -h [—Å–µ—Ä–≤–µ—Ä] -p 7777 -mem 4096 -n [–Ω–∏–∫] -arizona -x -window -cdn 1,1,1</small>
                </div>
            </div>
        </div>
        
        <!-- –ü–∞–Ω–µ–ª—å –Ω–∞—Å—Ç—Ä–æ–µ–∫ -->
        <div class="settings-panel" id="settingsPanel">
            <div class="settings-content">
                <div class="settings-header">
                    <h2 class="settings-title">–ù–∞—Å—Ç—Ä–æ–π–∫–∏ ArizonaPatches</h2>
                    <button class="close-settings" onclick="closeSettings()">√ó</button>
                </div>
                
                <div class="checkbox-group">
                    <!-- –ß–µ–∫–±–æ–∫—Å—ã –±—É–¥—É—Ç –¥–æ–±–∞–≤–ª–µ–Ω—ã –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ -->
                </div>
                
                <button class="save-settings-btn" onclick="saveSettings()">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è</button>
            </div>
        </div>
    </div>

    <script>
        // –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –≥—Ä–∞—Ñ–∏–∫–∏
        const CONFIG = {
            gfxType: 'smooth',
            showParticles: true,
            bloomType: 'none',
            bloomStrength: 1.1,
            wavesEnabled: true,
            wavesBrightness: 0.7,
            wavesSpeed: 1.0,
            particlesCount: 150,
            primaryColor: '#0078d4',
            darkTheme: true,
        };

        // DOM —ç–ª–µ–º–µ–Ω—Ç—ã
        const canvas = document.getElementById('main-canvas');
        const bloomCanvas = document.getElementById('bloom-canvas');
        const ctx = canvas.getContext('2d');
        const bloomCtx = bloomCanvas.getContext('2d');

        const startBtn = document.getElementById('startBtn');
        const nicknameInput = document.getElementById('nicknameInput');
        const serverSelect = document.getElementById('serverSelect');
        const serverLoading = document.getElementById('serverLoading');
        const notificationsContainer = document.getElementById('notificationsContainer');
        const launcherPathElement = document.getElementById('launcherPath');

        // –≠–ª–µ–º–µ–Ω—Ç—ã —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ —Å–µ—Ä–≤–µ—Ä–∞
        const serverStats = document.getElementById('serverStats');
        const serverName = document.getElementById('serverName');
        const serverOnline = document.getElementById('serverOnline');
        const serverQueue = document.getElementById('serverQueue');
        const serverMax = document.getElementById('serverMax');
        const selectedServerTitle = document.getElementById('selectedServerTitle');
        const selectedServerSubtitle = document.getElementById('selectedServerSubtitle');
        const serverInfoContent = document.getElementById('serverInfoContent');
        
        // –≠–ª–µ–º–µ–Ω—Ç—ã –ø–∞–Ω–µ–ª–∏ –Ω–∞—Å—Ç—Ä–æ–µ–∫
        const settingsPanel = document.getElementById('settingsPanel');
        const checkboxGroup = document.querySelector('.checkbox-group');

        // –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ
        let isLaunching = false;
        let selectedServer = null;
        let currentServerNumber = null;
        let patchesData = null;

        // –°–ª–æ–≤–∞—Ä—å –ø–µ—Ä–µ–≤–æ–¥–æ–≤
        const translations = {
            "UseCustomRenderEffects": "–ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∫–∞—Å—Ç–æ–º–Ω—ã–µ —ç—Ñ—Ñ–µ–∫—Ç—ã —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞",
            "CCamInteriorFix": "–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∏–Ω—Ç–æ–≤–æ–π —Å—Ç—Ä–µ–ª—å–±—ã",
            "COcclusionFix": "–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–æ—Å–∞–¥–∫–∏ —Ñ–ø—Å –≤ —Ü–µ–Ω—Ç—Ä–µ –∫–∞—Ä—Ç—ã",
            "DontDefaultWindowMode": "–í–æ–∑–≤—Ä–∞—â–µ–Ω–∏–µ –ø–æ–ª–Ω–æ—ç–∫—Ä–∞–Ω–Ω–æ–≥–æ —Ä–µ–∂–∏–º–∞ (–ø–æ –¥–µ—Ñ–æ–ª—Ç—É –æ–∫–æ–Ω–Ω—ã–π –±–µ–∑ —Ä–∞–º–æ–∫)",
            "DontInterfereAntiAFK": "–ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å AntiAFK (–µ—Å–ª–∏ –µ—Å—Ç—å)",
            "DontUseGreenZone": "–£–¥–∞–ª–∏—Ç—å –∑–µ–ª–µ–Ω—ã–µ –∑–æ–Ω—ã (–¥–ª—è LocalDM)",
            "DontUseScaleRadarMapIcons": "–ù–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —É–≤–µ–ª–∏—á–µ–Ω–Ω—ã–µ –∏–∫–æ–Ω–∫–∏ —Ä–∞–¥–∞—Ä–∞",
            "DontUseCustomAttachObject": "–ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–µ –ø—Ä–∏–∫—Ä–µ–ø–ª–µ–Ω–∏–µ –æ–±—ä–µ–∫—Ç–æ–≤",
            "DontUseCustomChat": "–ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π —á–∞—Ç –∏ 3D —Ç–µ–∫—Å—Ç",
            "DontUseCustomCarRender": "–ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥ –º–∞—à–∏–Ω",
            "DontUseCustomSync": "–ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—É—é —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—é SAMP",
            "DontUseCustomFastConnect": "–ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å FastConnect –æ—Ç AIR (–µ—Å–ª–∏ –µ—Å—Ç—å)",
            "DontUseCustomShadow": "–ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ —Ç–µ–Ω–∏",
            "DontUseVoiceChat": "–ù–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≥–æ–ª–æ—Å–æ–≤–æ–π —á–∞—Ç",
            "DontUseSoundSystem": "–ù–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –æ–∫—Ä—É–∂–∞—é—â–∏–µ –∑–≤—É–∫–∏",
            "DontUseCustomMarker": "–ù–µ —Ä–∏—Å–æ–≤–∞—Ç—å 3D –∏–∫–æ–Ω–∫–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä –≤ —Ü–≥ —Å—É–Ω–¥—É–∫)",
            "DontUseCustomNumberPlate": "–ù–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –Ω–æ–º–µ—Ä–Ω—ã–µ –∑–Ω–∞–∫–∏",
            "DontUseFadeScreen": "–£–±—Ä–∞—Ç—å –∑–∞—Ç–µ–º–Ω–µ–Ω–∏–µ —ç–∫—Ä–∞–Ω–∞",
            "DontUseFirstPerson": "–ù–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∫–∞–º–µ—Ä—É –æ—Ç –ø–µ—Ä–≤–æ–≥–æ –ª–∏—Ü–∞",
            "DontUseCustomVehicleLightsColor": "–ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π —Å–≤–µ—Ç —Ñ–∞—Ä",
            "DontPressWOnBike": "–£–±—Ä–∞—Ç—å –∞–≤—Ç–æ W –Ω–∞ –≤–µ–ª–æ—Å–∏–ø–µ–¥–µ",
            "CustomObjectForceDistance": "–ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–∞—è –¥–∏—Å—Ç–∞–Ω—Ü–∏—è –¥–ª—è –æ–±—ä–µ–∫—Ç–æ–≤ –ª–∞—É–Ω—á–µ—Ä–∞ (–Ω–∞—Å—Ç—Ä–æ–π—Ç–µ —Å–∞–º–∏)",
            "ServerObjectForceDistance": "–ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–∞—è –¥–∏—Å—Ç–∞–Ω—Ü–∏—è –¥–ª—è —Å–µ—Ä–≤–µ—Ä–Ω—ã—Ö –æ–±—ä–µ–∫—Ç–æ–≤ (–Ω–∞—Å—Ç—Ä–æ–π—Ç–µ —Å–∞–º–∏)",
            "ServerAttachObjectForceDistance": "–ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–∞—è –¥–∏—Å—Ç–∞–Ω—Ü–∏—è –¥–ª—è –ø—Ä–∏–∫—Ä–µ–ø–ª–µ–Ω–Ω—ã—Ö —Å–µ—Ä–≤–µ—Ä–Ω—ã—Ö –æ–±—ä–µ–∫—Ç–æ–≤ (–Ω–∞—Å—Ç—Ä–æ–π—Ç–µ —Å–∞–º–∏)"
        };

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
        async function init() {
            initCanvas();
            initParticles();
            animate();
            initEventListeners();
            
            try {
                if (window.pywebview && window.pywebview.api.get_config) {
                    const config = await window.pywebview.api.get_config();
                    launcherPathElement.textContent = config.launcher_path;
                    nicknameInput.value = config.last_nickname || '';
                    currentServerNumber = config.last_server || null;
                }
            } catch (error) {
                console.error('–û—à–∏–±–∫–∞ –ø–æ–ª—É—á–µ–Ω–∏—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏:', error);
            }
            
            loadServers(); // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ
            updateStartButtonState();

            // –ê–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ —Å–µ—Ä–≤–µ—Ä–æ–≤ –∫–∞–∂–¥—ã–µ 5 –º–∏–Ω—É—Ç
            setInterval(loadServers, 300000);
        }

        async function loadServers() {
            serverLoading.classList.add('active');
            serverSelect.disabled = true;
            
            try {
                let servers = null;
                
                if (window.pywebview && window.pywebview.api.get_servers) {
                    servers = await window.pywebview.api.get_servers();
                }
                
                if (!servers || servers.length === 0) {
                    // –î–µ–º–æ –¥–∞–Ω–Ω—ã–µ
                    const demoServers = [
                        {number: 1, name: "Payson", online: 934, queue: 0, recommended: true, ip: "payson.arizona-rp.com", port: 7777, maxplayers: 1000},
                        {number: 2, name: "Surprise", online: 856, queue: 0, recommended: true, ip: "surprise.arizona-rp.com", port: 7777, maxplayers: 1000},
                        {number: 3, name: "Chandler", online: 789, queue: 0, recommended: false, ip: "chandler.arizona-rp.com", port: 7777, maxplayers: 1000},
                        {number: 4, name: "Gilbert", online: 712, queue: 0, recommended: false, ip: "gilbert.arizona-rp.com", port: 7777, maxplayers: 1000},
                        {number: 5, name: "Glendale", online: 645, queue: 0, recommended: false, ip: "glendale.arizona-rp.com", port: 7777, maxplayers: 1000},
                        {number: 6, name: "Mesa", online: 578, queue: 0, recommended: false, ip: "mesa.arizona-rp.com", port: 7777, maxplayers: 1000},
                        {number: 7, name: "Scottsdale", online: 501, queue: 0, recommended: false, ip: "scottsdale.arizona-rp.com", port: 7777, maxplayers: 1000},
                        {number: 8, name: "Tempe", online: 423, queue: 0, recommended: false, ip: "tempe.arizona-rp.com", port: 7777, maxplayers: 1000},
                        {number: 9, name: "Peoria", online: 356, queue: 0, recommended: false, ip: "peoria.arizona-rp.com", port: 7777, maxplayers: 1000},
                        {number: 10, name: "Tucson", online: 278, queue: 0, recommended: false, ip: "tucson.arizona-rp.com", port: 7777, maxplayers: 1000},
                        {number: 11, name: "Yuma", online: 201, queue: 0, recommended: false, ip: "yuma.arizona-rp.com", port: 7777, maxplayers: 1000},
                        {number: 12, name: "Avondale", online: 123, queue: 0, recommended: false, ip: "avondale.arizona-rp.com", port: 7777, maxplayers: 1000},
                        {number: 13, name: "Goodyear", online: 45, queue: 0, recommended: false, ip: "goodyear.arizona-rp.com", port: 7777, maxplayers: 1000},
                        {number: 14, name: "Buckeye", online: 890, queue: 5, recommended: true, ip: "buckeye.arizona-rp.com", port: 7777, maxplayers: 1000},
                        {number: 15, name: "Casa Grande", online: 767, queue: 0, recommended: false, ip: "casa-grande.arizona-rp.com", port: 7777, maxplayers: 1000},
                        {number: 16, name: "Flagstaff", online: 689, queue: 0, recommended: false, ip: "flagstaff.arizona-rp.com", port: 7777, maxplayers: 1000},
                        {number: 17, name: "Lake Havasu", online: 612, queue: 0, recommended: false, ip: "lake-havasu.arizona-rp.com", port: 7777, maxplayers: 1000},
                        {number: 18, name: "Maricopa", online: 534, queue: 0, recommended: false, ip: "maricopa.arizona-rp.com", port: 7777, maxplayers: 1000},
                        {number: 19, name: "Sierra Vista", online: 456, queue: 0, recommended: false, ip: "sierra-vista.arizona-rp.com", port: 7777, maxplayers: 1000},
                        {number: 20, name: "Apache Junction", online: 378, queue: 0, recommended: false, ip: "apache-junction.arizona-rp.com", port: 7777, maxplayers: 1000},
                        {number: 21, name: "Bullhead City", online: 301, queue: 0, recommended: false, ip: "bullhead-city.arizona-rp.com", port: 7777, maxplayers: 1000},
                        {number: 22, name: "Prescott", online: 223, queue: 0, recommended: false, ip: "prescott.arizona-rp.com", port: 7777, maxplayers: 1000},
                        {number: 23, name: "Oro Valley", online: 145, queue: 0, recommended: false, ip: "oro-valley.arizona-rp.com", port: 7777, maxplayers: 1000},
                        {number: 24, name: "Marana", online: 67, queue: 0, recommended: false, ip: "marana.arizona-rp.com", port: 7777, maxplayers: 1000},
                        {number: 25, name: "Nogales", online: 990, queue: 10, recommended: true, ip: "nogales.arizona-rp.com", port: 7777, maxplayers: 1000},
                        {number: 26, name: "Douglas", online: 912, queue: 0, recommended: true, ip: "douglas.arizona-rp.com", port: 7777, maxplayers: 1000},
                        {number: 27, name: "Page", online: 834, queue: 0, recommended: false, ip: "page.arizona-rp.com", port: 7777, maxplayers: 1000},
                        {number: 28, name: "Sun City", online: 756, queue: 0, recommended: false, ip: "sun-city.arizona-rp.com", port: 7777, maxplayers: 1000},
                        {number: 29, name: "Queen Creek", online: 678, queue: 0, recommended: false, ip: "queen-creek.arizona-rp.com", port: 7777, maxplayers: 1000},
                        {number: 30, name: "Sedona", online: 601, queue: 0, recommended: false, ip: "sedona.arizona-rp.com", port: 7777, maxplayers: 1000}
                    ];
                    servers = demoServers;
                }
                
                populateServerSelect(servers, currentServerNumber);
            } catch (error) {
                console.error('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ —Å–µ—Ä–≤–µ—Ä–æ–≤:', error);
                showNotification('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ —Å–µ—Ä–≤–µ—Ä–æ–≤', 'error');
            } finally {
                serverLoading.classList.remove('active');
                serverSelect.disabled = false;
            }
        }

        function populateServerSelect(servers, restoreServerNumber = null) {
            serverSelect.innerHTML = '<option value="">–í—ã–±–µ—Ä–∏—Ç–µ —Å–µ—Ä–≤–µ—Ä</option>';
            
            // –°–æ—Ä—Ç–∏—Ä—É–µ–º —Å–µ—Ä–≤–µ—Ä—ã: —Å–Ω–∞—á–∞–ª–∞ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–µ, –ø–æ—Ç–æ–º –ø–æ –æ–Ω–ª–∞–π–Ω—É
            const sortedServers = servers.sort((a, b) => {
                if (a.recommended && !b.recommended) return -1;
                if (!a.recommended && b.recommended) return 1;
                return b.online - a.online;
            });
            
            sortedServers.forEach(server => {
                const option = document.createElement('option');
                option.value = server.number;
                
                let statusIcon = 'üü¢';
                if (server.queue > 0) statusIcon = 'üü°';
                if (server.online >= 990) statusIcon = 'üî¥';
                
                const recommendBadge = server.recommended ? ' ‚≠ê' : '';
                const queueInfo = server.queue > 0 ? ` üîÑ${server.queue}` : '';
                
                option.textContent = `${statusIcon} ${server.name} [${server.online}/${server.maxplayers || 1000}]${queueInfo}${recommendBadge}`;
                option.dataset.server = JSON.stringify(server);
                serverSelect.appendChild(option);
            });
            
            // –í–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –ø—Ä–µ–¥—ã–¥—É—â–∏–π –≤—ã–±–æ—Ä –∏–ª–∏ –≤—ã–±–∏—Ä–∞–µ–º –ø–µ—Ä–≤—ã–π —Ä–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞–Ω–Ω—ã–π
            if (restoreServerNumber) {
                const serverToRestore = servers.find(s => s.number === restoreServerNumber);
                if (serverToRestore) {
                    serverSelect.value = serverToRestore.number;
                    updateServerData(serverToRestore);
                    console.log('–í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –≤—ã–±–æ—Ä —Å–µ—Ä–≤–µ—Ä–∞:', serverToRestore.name);
                } else {
                    // –ï—Å–ª–∏ —Å–µ—Ä–≤–µ—Ä–∞ –±–æ–ª—å—à–µ –Ω–µ—Ç –≤ —Å–ø–∏—Å–∫–µ, –≤—ã–±–∏—Ä–∞–µ–º —Ä–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞–Ω–Ω—ã–π
                    const recommendedServer = servers.find(s => s.recommended);
                    if (recommendedServer) {
                        serverSelect.value = recommendedServer.number;
                        updateServerData(recommendedServer);
                    }
                }
            } else {
                // –ü–µ—Ä–≤–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ - –∞–≤—Ç–æ–≤—ã–±–æ—Ä –ø–µ—Ä–≤–æ–≥–æ —Ä–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞–Ω–Ω–æ–≥–æ —Å–µ—Ä–≤–µ—Ä–∞
                const recommendedServer = servers.find(s => s.recommended);
                if (recommendedServer) {
                    serverSelect.value = recommendedServer.number;
                    updateServerData(recommendedServer);
                }
            }
            
            updateStartButtonState();
        }

        function updateServerData(server) {
            selectedServer = server;
            
            serverStats.style.display = 'block';
            serverName.textContent = server.name;
            serverOnline.textContent = server.online;
            serverQueue.textContent = server.queue > 0 ? server.queue : '–ù–µ—Ç';
            serverMax.textContent = server.maxplayers || '1000';
            
            selectedServerTitle.textContent = server.name;
            selectedServerSubtitle.textContent = `–°–µ—Ä–≤–µ—Ä #${server.number} (${server.ip})`;
            
            updateServerInfoContent(server);
            updateStartButtonState();
        }

        function updateServerInfoContent(server) {
            const maxPlayers = server.maxplayers || 1000;
            const loadPercentage = ((server.online / maxPlayers) * 100).toFixed(1);
            const queueInfo = server.queue > 0 ? 
                `<div style="color: #FF9800; margin-top: 10px; background: rgba(255, 152, 0, 0.1); padding: 10px; border-radius: 5px;">
                    ‚ö†Ô∏è <strong>–í –æ—á–µ—Ä–µ–¥–∏: ${server.queue} –∏–≥—Ä–æ–∫–æ–≤</strong><br>
                    <small>–ü—Ä–∏–º–µ—Ä–Ω–æ–µ –≤—Ä–µ–º—è –æ–∂–∏–¥–∞–Ω–∏—è: ${Math.ceil(server.queue / 2)} –º–∏–Ω—É—Ç</small>
                </div>` : '';
            
            let statusColor = '#4CAF50';
            let statusText = 'üü¢ –ù–∏–∑–∫–∞—è –Ω–∞–≥—Ä—É–∑–∫–∞';
            
            if (server.online >= maxPlayers * 0.99) {
                statusColor = '#F44336';
                statusText = 'üî¥ –°–µ—Ä–≤–µ—Ä –ø–µ—Ä–µ–ø–æ–ª–Ω–µ–Ω';
            } else if (server.online >= maxPlayers * 0.9) {
                statusColor = '#FF9800';
                statusText = 'üü° –í—ã—Å–æ–∫–∞—è –Ω–∞–≥—Ä—É–∑–∫–∞';
            } else if (server.online >= maxPlayers * 0.7) {
                statusColor = '#8BC34A';
                statusText = 'üü¢ –°—Ä–µ–¥–Ω—è—è –Ω–∞–≥—Ä—É–∑–∫–∞';
            }
            
            const recommendBadge = server.recommended ? 
                '<div style="background: linear-gradient(135deg, #FFD700, #FF9800); color: black; padding: 5px 10px; border-radius: 5px; display: inline-block; margin-left: 10px; font-size: 12px; font-weight: bold;">‚≠ê –†–ï–ö–û–ú–ï–ù–î–£–ï–ú</div>' : '';
            
            serverInfoContent.innerHTML = `
                <div style="text-align: center; color: rgba(255,255,255,0.9); font-family: 'Montserrat Alternates';">
                    <div style="font-size: 18px; margin-bottom: 20px; color: ${statusColor}; display: flex; align-items: center; justify-content: center; gap: 10px;">
                        <span>${statusText}</span>
                        ${recommendBadge}
                    </div>
                    
                    <div style="margin-top: 20px;">
                        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px;">
                            <span>–ó–∞–ø–æ–ª–Ω–µ–Ω–Ω–æ—Å—Ç—å:</span>
                            <span><strong>${loadPercentage}%</strong> (${server.online}/${maxPlayers})</span>
                        </div>
                        <div style="width: 100%; height: 10px; background: rgba(255,255,255,0.1); border-radius: 5px; overflow: hidden; margin-bottom: 10px;">
                            <div style="width: ${loadPercentage}%; height: 100%; background: ${statusColor}; border-radius: 5px;"></div>
                        </div>
                    </div>
                    
                    ${queueInfo}
                    
                    <div style="margin-top: 20px; font-size: 12px; color: rgba(255,255,255,0.5);">
                        IP: ${server.ip}:${server.port}<br>
                        ID —Å–µ—Ä–≤–µ—Ä–∞: #${server.number}
                    </div>
                </div>
            `;
        }

        function updateStartButtonState() {
            const hasNickname = nicknameInput.value.trim().length > 0;
            const hasServer = selectedServer !== null;
            
            startBtn.disabled = !(hasNickname && hasServer) || isLaunching;
            
            if (isLaunching) {
                startBtn.classList.add('start-btn-loading');
                startBtn.innerHTML = '';
            } else {
                startBtn.classList.remove('start-btn-loading');
                if (!startBtn.disabled) {
                    startBtn.innerHTML = `<span>üéÆ –ò–≥—Ä–∞—Ç—å –Ω–∞ ${selectedServer ? selectedServer.name : ''}</span>`;
                } else {
                    startBtn.innerHTML = '<span>üéÆ –ù–∞—á–∞—Ç—å –∏–≥—Ä—É</span>';
                }
            }
        }

        async function startGame() {
            if (isLaunching) return;
            
            const nickname = nicknameInput.value.trim();
            if (!nickname) {
                showNotification('–í–≤–µ–¥–∏—Ç–µ –Ω–∏–∫–Ω–µ–π–º', 'warning');
                nicknameInput.focus();
                return;
            }
            
            if (!selectedServer) {
                showNotification('–í—ã–±–µ—Ä–∏—Ç–µ —Å–µ—Ä–≤–µ—Ä', 'warning');
                return;
            }
            
            isLaunching = true;
            updateStartButtonState();
            
            try {
                if (window.pywebview && window.pywebview.api.start_game) {
                    const result = await window.pywebview.api.start_game(nickname, selectedServer);
                    
                    if (result && result.success) {
                        showNotification(result.message || '–ò–≥—Ä–∞ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è!', 'success');
                    } else {
                        showNotification(result?.message || '–û—à–∏–±–∫–∞ –∑–∞–ø—É—Å–∫–∞', 'error');
                    }
                } else {
                    console.warn('API –Ω–µ –¥–æ—Å—Ç—É–ø–Ω–æ. –î–µ–º–æ —Ä–µ–∂–∏–º.');
                    setTimeout(() => {
                        console.log(`–î–µ–º–æ: –∑–∞–ø—É—Å–∫ –∏–≥—Ä—ã –¥–ª—è ${nickname} –Ω–∞ ${selectedServer.ip}`);
                    }, 2000);
                }
            } catch (error) {
                console.error('–û—à–∏–±–∫–∞ –∑–∞–ø—É—Å–∫–∞ –∏–≥—Ä—ã:', error);
                showNotification('–û—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ –∏–≥—Ä—ã', 'error');
            } finally {
                setTimeout(() => {
                    isLaunching = false;
                    updateStartButtonState();
                }, 3000);
            }
        }

        function showNotification(message, type = 'info', duration = 5000) {
            const notification = document.createElement('div');
            notification.className = `notification notification-${type}`;
            notification.innerHTML = message + '<button class="notification-close" onclick="this.parentElement.remove()">√ó</button>';
            
            notificationsContainer.appendChild(notification);
            
            setTimeout(() => {
                notification.remove();
            }, duration);
        }

        function initEventListeners() {
            // –í—ã–±–æ—Ä —Å–µ—Ä–≤–µ—Ä–∞
            serverSelect.addEventListener('change', function() {
                const serverNumber = this.value;
                if (serverNumber) {
                    const server = JSON.parse(this.options[this.selectedIndex].dataset.server);
                    updateServerData(server);
                } else {
                    resetServerInfo();
                }
            });

            // –í–≤–æ–¥ –Ω–∏–∫–Ω–µ–π–º–∞
            nicknameInput.addEventListener('input', debounce(saveNickname, 500));
            nicknameInput.addEventListener('input', updateStartButtonState);

            // –ö–Ω–æ–ø–∫–∞ —Å—Ç–∞—Ä—Ç–∞
            startBtn.addEventListener('click', startGame);

            // Enter –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –∑–∞–ø—É—Å–∫–∞
            nicknameInput.addEventListener('keypress', function(e) {
                if (e.key === 'Enter' && !startBtn.disabled) {
                    startGame();
                }
            });

            // –†–µ—Å–∞–π–∑ –æ–∫–Ω–∞
            window.addEventListener('resize', function() {
                canvasWidth = window.innerWidth;
                canvasHeight = window.innerHeight;
                canvas.width = canvasWidth;
                canvas.height = canvasHeight;
                bloomCanvas.width = canvasWidth;
                bloomCanvas.height = canvasHeight;
                initParticles();
            });
        }

        function resetServerInfo() {
            serverStats.style.display = 'none';
            selectedServerTitle.textContent = '–í—ã–±–µ—Ä–∏—Ç–µ —Å–µ—Ä–≤–µ—Ä';
            selectedServerSubtitle.textContent = '–î–∞–Ω–Ω—ã–µ –æ–±–Ω–æ–≤–ª—è—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏';
            serverInfoContent.innerHTML = `
                <p style="text-align: center; color: rgba(255,255,255,0.6); font-family: 'Montserrat Alternates';">
                    –í—ã–±–µ—Ä–∏—Ç–µ —Å–µ—Ä–≤–µ—Ä –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏<br>
                    <span style="font-size: 14px; color: rgba(255,255,255,0.4);">–î–∞–Ω–Ω—ã–µ –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è —Å —Å–µ—Ä–≤–µ—Ä–∞ Arizona</span>
                </p>
            `;
            selectedServer = null;
            updateStartButtonState();
        }

        // –§—É–Ω–∫—Ü–∏–∏ –¥–ª—è –ø–∞–Ω–µ–ª–∏ –Ω–∞—Å—Ç—Ä–æ–µ–∫
        async function openSettings() {
            try {
                if (window.pywebview && window.pywebview.api.read_patches) {
                    patchesData = await window.pywebview.api.read_patches();
                } else {
                    // –î–µ–º–æ –¥–∞–Ω–Ω—ã–µ, –µ—Å–ª–∏ API –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–æ
                    patchesData = {
                        "UseCustomRenderEffects": false,
                        "CCamInteriorFix": true,
                        "COcclusionFix": true,
                        "DontDefaultWindowMode": true,
                        "DontInterfereAntiAFK": false,
                        "DontUseGreenZone": true,
                        "DontUseScaleRadarMapIcons": true,
                        "DontUseCustomAttachObject": true,
                        "DontUseCustomChat": true,
                        "DontUseCustomCarRender": true,
                        "DontUseCustomSync": true,
                        "DontUseCustomFastConnect": true,
                        "DontUseCustomShadow": true,
                        "DontUseVoiceChat": false,
                        "DontUseSoundSystem": true,
                        "DontUseCustomMarker": true,
                        "DontUseCustomNumberPlate": true,
                        "DontUseFadeScreen": true,
                        "DontUseFirstPerson": true,
                        "DontUseCustomVehicleLightsColor": true,
                        "DontPressWOnBike": false,
                        "CustomObjectForceDistance": false,
                        "ServerObjectForceDistance": false,
                        "ServerAttachObjectForceDistance": false
                    };
                }

                renderCheckboxes();
                settingsPanel.style.display = 'flex';
            } catch (error) {
                console.error('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –Ω–∞—Å—Ç—Ä–æ–µ–∫:', error);
                showNotification('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –Ω–∞—Å—Ç—Ä–æ–µ–∫', 'error');
            }
        }

        function closeSettings() {
            settingsPanel.style.display = 'none';
            checkboxGroup.innerHTML = '';
        }

        function renderCheckboxes() {
            checkboxGroup.innerHTML = '';
            const boolKeys = Object.keys(patchesData).filter(key => typeof patchesData[key] === 'boolean');

            boolKeys.forEach(key => {
                const item = document.createElement('div');
                item.className = 'checkbox-item';
                
                const checkbox = document.createElement('input');
                checkbox.type = 'checkbox';
                checkbox.id = key;
                checkbox.checked = patchesData[key];
                
                const label = document.createElement('label');
                label.className = 'checkbox-label';
                label.htmlFor = key;
                // –ò—Å–ø–æ–ª—å–∑—É–µ–º –ø–µ—Ä–µ–≤–æ–¥ –µ—Å–ª–∏ –µ—Å—Ç—å, –∏–Ω–∞—á–µ –æ—Ä–∏–≥–∏–Ω–∞–ª
                const englishLabel = key.replace(/([A-Z])/g, ' $1').trim();
                label.textContent = translations[key] || englishLabel;
                
                item.appendChild(checkbox);
                item.appendChild(label);
                checkboxGroup.appendChild(item);
            });
        }

        async function saveSettings() {
            const boolKeys = Object.keys(patchesData).filter(key => typeof patchesData[key] === 'boolean');
            
            boolKeys.forEach(key => {
                const checkbox = document.getElementById(key);
                if (checkbox) {
                    patchesData[key] = checkbox.checked;
                }
            });

            try {
                if (window.pywebview && window.pywebview.api.write_patches) {
                    const result = await window.pywebview.api.write_patches(patchesData);
                    if (result.success) {
                        showNotification('–ù–∞—Å—Ç—Ä–æ–π–∫–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã', 'success');
                        closeSettings();
                    } else {
                        showNotification('–û—à–∏–±–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è: ' + result.message, 'error');
                    }
                } else {
                    console.log('–î–µ–º–æ: –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã', patchesData);
                    showNotification('–ù–∞—Å—Ç—Ä–æ–π–∫–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã (–¥–µ–º–æ)', 'success');
                    closeSettings();
                }
            } catch (error) {
                console.error('–û—à–∏–±–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –Ω–∞—Å—Ç—Ä–æ–µ–∫:', error);
                showNotification('–û—à–∏–±–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –Ω–∞—Å—Ç—Ä–æ–µ–∫', 'error');
            }
        }

        // –ì—Ä–∞—Ñ–∏—á–µ—Å–∫–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏
        let canvasWidth, canvasHeight;
        let particles = [];
        let time = 0;
        let animationId;

        function initCanvas() {
            canvasWidth = window.innerWidth;
            canvasHeight = window.innerHeight;
            
            canvas.width = canvasWidth;
            canvas.height = canvasHeight;
            bloomCanvas.width = canvasWidth;
            bloomCanvas.height = canvasHeight;
        }

        function initParticles() {
            particles = [];
            const count = CONFIG.particlesCount * (canvasWidth * canvasHeight) / (800 * 480);
            for(let i = 0; i < count; i++) {
                particles.push({
                    x: Math.random() * canvasWidth,
                    y: Math.random() * canvasHeight,
                    size: Math.random() * 2 + 0.5,
                    speedX: (Math.random() - 0.5) * 0.5,
                    speedY: (Math.random() - 0.5) * 0.5,
                    alpha: Math.random() * 0.3 + 0.1,
                    waveInfluence: Math.random() * 0.02
                });
            }
        }

        function renderWaves() {
            if (!CONFIG.wavesEnabled) return;
            
            time += 0.01 * CONFIG.wavesSpeed;
            
            const waveCount = 5;
            for(let i = 0; i < waveCount; i++) {
                const waveY = (i / waveCount) * canvasHeight;
                const amplitude = 20 + i * 5;
                const frequency = 0.005 + i * 0.001;
                const width = 1 + i * 0.3;
                const alpha = 0.05 + i * 0.05;
                
                ctx.beginPath();
                ctx.strokeStyle = `rgba(255, 255, 255, ${alpha * CONFIG.wavesBrightness})`;
                ctx.lineWidth = width;
                ctx.lineCap = 'round';
                
                for(let x = 0; x <= canvasWidth; x += 2) {
                    const y = waveY + 
                             Math.sin(x * frequency + time) * amplitude +
                             Math.sin(x * frequency * 0.5 + time * 1.3) * amplitude * 0.3;
                    
                    if(x === 0) {
                        ctx.moveTo(x, y);
                    } else {
                        ctx.lineTo(x, y);
                    }
                }
                
                ctx.stroke();
            }
        }

        function renderParticles() {
            if (!CONFIG.showParticles) return;
            
            for(const p of particles) {
                p.x += p.speedX + Math.sin(time * 2 + p.x * 0.01) * p.waveInfluence;
                p.y += p.speedY + Math.cos(time * 2 + p.y * 0.01) * p.waveInfluence;
                
                if(p.x < 0 || p.x > canvasWidth) p.speedX *= -1;
                if(p.y < 0 || p.y > canvasHeight) p.speedY *= -1;
                
                ctx.fillStyle = `rgba(255, 255, 255, ${p.alpha})`;
                ctx.beginPath();
                ctx.arc(p.x, p.y, p.size, 0, Math.PI * 2);
                ctx.fill();
            }
        }

        function applyBloom() {
            if (CONFIG.bloomType === 'none' || CONFIG.bloomStrength <= 0) {
                bloomCanvas.style.opacity = '0';
                return;
            }

            bloomCtx.clearRect(0, 0, canvasWidth, canvasHeight);
            bloomCtx.drawImage(canvas, 0, 0);

            bloomCanvas.style.opacity = CONFIG.bloomStrength.toString();
            bloomCanvas.style.filter = `blur(${20}px) brightness(${1 + CONFIG.bloomStrength})`;
        }

        function animate() {
            ctx.clearRect(0, 0, canvasWidth, canvasHeight);
            
            renderWaves();
            renderParticles();
            applyBloom();
            
            animationId = requestAnimationFrame(animate);
        }

        // –§—É–Ω–∫—Ü–∏—è debounce –¥–ª—è –æ—Ç–ª–æ–∂–µ–Ω–Ω–æ–≥–æ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è
        function debounce(func, delay) {
            let timeoutId;
            return function (...args) {
                clearTimeout(timeoutId);
                timeoutId = setTimeout(() => func.apply(this, args), delay);
            };
        }

        // –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –Ω–∏–∫–∞
        async function saveNickname() {
            const nickname = nicknameInput.value.trim();
            if (window.pywebview && window.pywebview.api.update_nickname) {
                try {
                    await window.pywebview.api.update_nickname(nickname);
                } catch (error) {
                    console.error('–û—à–∏–±–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –Ω–∏–∫–∞:', error);
                }
            }
        }

        // –ó–∞–ø—É—Å–∫ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
        window.addEventListener('load', init);
    </script>
</body>
</html>